!function(){function e(e,t,o){if(""!==e){if(n[e]&&!o)throw"Module "+e+" already exist!";n[e]="function"==typeof t?{id:e,fn:t,exports:{}}:{exports:t}}}function t(e){var o,r,a=n[e];if(a)return(o=a.fn)&&((r="function"==typeof o?o(t,a.exports,a):o)&&(a.exports=r),delete a.fn),a.exports;throw"Module "+e+" not exist!"}var n={},o=document.getElementsByTagName("script"),r=o[o.length-1];if(window.mt={},mt.module=function(){return arguments.length>=2?e.apply(e,arguments):t.apply(t,arguments)},r){var a=r.getAttribute("init"),i=function(){};if(a&&""!=a&&(a=a.split(",")).length){var c=function(){for(var e=0;e<a.length;e++)mt.module(a[e])};r.onload=c,r.onreadystatechange=function(){var e=this.readyState;"loaded"!==e&&"complete"!==e||(r.onreadystatechange=i,c())}}}}(),mt.module("modules/validate",function(e,t,n){t.api={useremail:function(e){var t={};return t.ret=!0,t.message="",$.ajax({url:"/ajax/tyCheckemail",type:"post",async:!1,data:"email="+e,success:function(e){200!=e.code&&(t.ret=!1),t.message=e.message},error:function(){t.ret=!1}}),t},username:function(e){var t={};return t.ret=!0,t.message="",$.ajax({url:"/ajax/tyCheckusername",type:"post",async:!1,data:"username="+e,success:function(e){200!=e.code&&(t.ret=!1),t.message=e.message},error:function(){t.ret=!1}}),t},hasmobile:function(e){var t={};return t.ret=!0,t.message="",$.ajax({url:"/ajax/tyCheckmobile",type:"post",async:!1,data:"mobile="+e,success:function(e){200!=e.code&&(t.ret=!1),t.message=e.message},error:function(){t.ret=!1}}),t},captcha:function(e){var t=!0;return $.ajax({url:"/ajax/checkVcode",type:"post",async:!1,data:"type=register&code="+e,success:function(e){200!=e.code&&(t=!1)},error:function(){t=!1}}),t},httpregname:function(e){var t=!0;return $.ajax({url:"/activity/verifyUname?uname="+e,async:!1,success:function(e){1!=e&&(t=!1)},error:function(){t=!1}}),t},regname:function(e){var t=!0;return $.ajax({url:"/user/verifyUname?uname="+e,async:!1,success:function(e){1!=e&&(t=!1)},error:function(){t=!1}}),t},regInvests:function(e){var t=!0;return $.ajax({url:"/fund/verifyCompanyRecord",type:"post",data:"company="+e,async:!1,success:function(e){1!=e&&(t=!1)},error:function(){t=!1}}),t},regtimeoutInvests:function(e){var t=!0;return $.ajax({url:"/fund/verifyCompanyRun",type:"post",data:"company="+e,async:!1,success:function(e){1!=e&&(t=!1)},error:function(){t=!1}}),t},regemail:function(e){var t=!0;return $.ajax({url:"/user/verifyUemail?uemail="+e,async:!1,success:function(e){1!=e&&(t=!1)},error:function(){t=!1}}),t},companyName:function(e){var t={};return t.ret=!0,t.message="",e=e.trim(),e=encodeURI(e),$.ajax({url:"/member/getCompany?company_name="+e,async:!1,success:function(e){200==e.code?t.message=e.data.id:t.ret=!1},error:function(){t.ret=!1}}),t},equal:function(e,t){return e===$(t).val()},notempty:function(e){return""!==$.trim(e)},len:function(e,t,n){return!(e.length<t||e.length>n)},cha:function(e,t){return!!new RegExp(t).test(e)},number:function(e){return!!/^\d+$/.test(e)},user_name:function(e){},times:function(e,t){return e%t==0},cn_or_en:function(e){return!!/^([\u4E00-\u9FA5]|[a-zA-Z])+$/.test(e)},firstplace_cn_or_num:function(e){return!!/^[\u4e00-\u9fa5|a-z|A-z]/i.test(e)},floatNumber:function(e){return!!/^\d+((\.{1}\d+)|\d?)$/.test(e)},numberFixed2:function(e){return!!/^(([1-9]+)|([0-9]+\.[0-9]{1,2}))$/.test(e)},cn:function(e){return!!/^[\u4e00-\u9fa5]+$/.test(e)},filter:function(e){return!!/^[0-9a-zA-Z_]{1,}$/.test(e)},pwd:function(e){return!!/((?=.*\d)(?=.*\D)|(?=.*[a-zA-Z])(?=.*[^a-zA-Z]))^.{1,}$/.test(e)},reg_cn_letter_number:function(e){return!!/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/.test(e)},reg_cn_len:function(e,t,n){var o=e.replace(/[^\x00-\xFF]/g,"***").length;return!(o<t||o>n)},reg_cn_len2:function(e,t,n){var o=e.replace(/[^\x00-\xFF]/g,"**").length;return!(o<t||o>n)},email:function(e){return!!/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(e)},mobile:function(e){return!!e&&(e=e.replace(/\s+/g,""),!!/^(13\d|18\d|15\d|17\d|14\d|19\d|16\d)\d{8}$/.test(e))},notmobile:function(e){return!/1\d{10}/.test(e)},ID_card:function(e){return e=$.trim(e),!!/(^\d{15}$)|(^\d{16}$)|(^\d{18}$)|(^\d{19}$)|(^\d{17}(\d|X|x)$)/.test(e)},numberRegion:function(e,t,n){return!!/\d+/.test(e)&&(e-=0,t-=0,n-=0,!(e>n||e<t))},numberMaxOpen:function(e,t){return!!/\d+/.test(e)&&(e-=0,t-=0,e<t)},numberMaxClosed:function(e,t){return!!/\d+/.test(e)&&(e-=0,t-=0,e<=t)},numberMinOpen:function(e,t){return!!/\d+/.test(e)&&(e-=0,t-=0,e>t)},numberMinClosed:function(e,t){return!!/\d+/.test(e)&&(e-=0,t-=0,e>=t)},vcode:function(e,t){var n=!0;return $.ajax({url:"/vcode/check?type="+t+"&vcode="+e,async:!1,success:function(e){0!=e&&(n=!1)},error:function(){n=!1}}),n},checkRegMobileCode:function(e,t){var n=!0;return $.ajax({url:"/Usermobile/checkPhoneCode",data:{mobile:t,mobilecode:e},async:!1,success:function(e){(e*=1)>0&&(n=!1)},error:function(){n=!1}}),n},tyregistervcode:function(e){var t=!0;return $.ajax({url:"/ajax/checkVcode",type:"post",async:!1,data:"type=register&code="+e,success:function(e){200!=e.code&&(t=!1)},error:function(){t=!1}}),t}},t.valid=function(e){var n=$(e),o={};if(n[0]&&"FORM"===n[0].tagName.toUpperCase()){for(var r=n.find("[data-valid]"),a=0,i=r.length,c=!0;a<i;a++)if((c=t.valid(r.eq(a)))&&c.error){o=c;break}return o}for(var s,u,d,l=n.attr("data-valid").split("|"),a=0,i=l.length;a<i;a++)if(d=l[a].split(":"),s=d[0],(u=d.slice(1)).unshift(n.val()),t.api[s]&&$.isFunction(t.api[s]))if("object"==typeof(c=t.api[s].apply(n,u))){if(0==c.ret){o={error:1,element:n,valid:s,message:c.message};break}1==c.ret&&(o={error:0,element:n,valid:s,message:c.message})}else{if(0==c){o={error:1,element:n,valid:s};break}o={error:0,element:n,valid:s}}return o}}),mt.module("modules/Event",function(e,t,n){function o(e){this.NAMESPACE=e}var r={},a=Array.prototype.slice,i=o.prototype;i.listen=i.addEventListener=function(e,t){if(t){var n=this.NAMESPACE,o=r[n].evs;return o[e]?o[e].push(t):o[e]=[t],this}},i.fire=function(e){var t,n,o=a.call(arguments,1),i=this.NAMESPACE,c=r[i].evs[e],s=0,u=0,d=r[i].once[e];if(c&&c.length)for(t=c.length;s<t;s++)c[s].apply(c[s],o);if(d&&d.length){for(n=d.length;u<n;u++)d[u].apply(d[u],o);try{delete r[i].once[e]}catch(t){r[i].once[e]=null}}return this},i.once=function(e,t){if(t){var n=this.NAMESPACE,o=r[n].once;return o[e]?o[e].push(t):o[e]=[t],this}},i.remove=function(e,t){var n=r[e];if(n){var o,a=n.evs,i=0,c=t.toString();if(a&&a.length)for(o=a.length;i<o;i++)c==a[i].toString()&&a.splice(i,1)}},n.exports=function(e){var t=r[e];return t||(t=r[e]={cons:new o(e),evs:{},once:{}}),t.cons}}),mt.module("modules/form",function(e,t,n){function o(e,t){if(e.parentsUntil){var n=e.parentsUntil(t),o=n.length;return o?n.eq(o-1).parent():e}for(var r=e.parent().get(0),t=t.toUpperCase();r&&r.tagName&&r.tagName.toUpperCase()!==t;)r=r.parentNode;return $(r)}var r=e("modules/validate"),a=e("modules/Event")("formModule");$("body").on("submit","[role=ajaxfrom],[role=validform]",function(e){var t=$(this),n=t.attr("method")||"GET",o=t.attr("action"),i=r.valid(t);if(i&&!i.error){if("ajaxfrom"!=t.attr("role"))return!0;if("1"==t.attr("role-clock"))return!1;t.attr("role-clock",1),a.fire(o+"_ajax_before",t),$.ajax({url:o,type:n,data:t.serializeArray(),success:function(e,n,r){a.fire(o+"_success",{data:e,text:n,xhr:r},t),t.attr("role-clock",0)},error:function(e,n,r){a.fire(o+"_error",{xhr:e,text:n,error:r},t),t.attr("role-clock",0)}})}else a.fire(o+"_valid_failure",i,t);e.preventDefault()}).on("focus","[data-valid]",function(e){var t,n=$(this),r=o(n,"form");r.attr("valid-after")||(t=r.attr("action"),r.length&&a.fire(t+"_valid_cleanup",n))}).on("blur","[data-valid]",function(e){var t=this;setTimeout(function(){var e,n,i=$(t),c=o(i,"form");c.attr("valid-after")||(n=r.valid(i),e=c.attr("action"),c.length&&(n.error&&a.fire(e+"_valid_failure",n,c),n.error||a.fire(e+"_valid_success",i,c,n)))},200)}).on("keyup","[data-valid]",function(e){var t,n=$(this),r=o(n,"form");r.length&&(t=r.attr("action"),a.fire(t+"_valid_cleanup",n))}).on("change","[data-valid]",function(e){var t,n=$(this),r=o(n,"form");r.attr("valid-after")||r.length&&(t=r.attr("action"),a.fire(t+"_valid_cleanup",n))}).on("click",".reflashVcode",function(e){e.preventDefault();var t=$(this).parent().find("img.vcodeimg"),n=t.attr("src");n&&""!=n&&t.attr("src",n+"1")}),t.listen=function(e,t){t.success&&a.addEventListener(e+"_success",function(e,n){t.success.apply(n,[e])}),t.error&&a.addEventListener(e+"_error",function(e,n){t.error.apply(n,[e])}),t.validError&&a.addEventListener(e+"_valid_failure",function(e){t.validError(e)}),t.validSuccess&&a.addEventListener(e+"_valid_success",function(e,n,o){t.validSuccess(e,n,o)}),t.cleanup&&a.addEventListener(e+"_valid_cleanup",function(e){t.cleanup(e)}),t.ajaxBefore&&a.addEventListener(e+"_ajax_before",function(e){t.ajaxBefore(e)})},t.ajax=function(e){var t={type:"get",async:!1,url:"",callback:"",dataType:"json",error:!1},n=(new Date).getTime();for(var o in e)t[o]=e[o];$.ajax({type:t.type,async:t.async,url:t.url+("get"!=t.type?"":"&v="+n),dataType:t.dataType,data:t.data,success:function(e){t.callback(e)},error:t.error})}}),mt.module("mobile/qpsmoblie",function(e,t,n){function o(e){0==window.orientation||180==window.orientation?($.cookie("nomobile","",{expires:"-1",path:"/"}),window.location.reload()):-90!=window.orientation&&90!=window.orientation||($.cookie("nomobile","1",{expires:"1",path:"/"}),window.location.reload())}function r(){var e=navigator.userAgent,t=(navigator.appVersion,e.indexOf("Android")>-1||e.indexOf("Linux")>-1);e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(t){if(h=$(window).height(),$(".contant .mod-wrap-height").height(h),$(".slide").css({top:-h*w+"px"}),!(w<g-1))return!1;$(".contant").height(h)}}function a(e){try{var t=e.touches[0],n=Number(t.pageX),o=Number(t.pageY);return l=n,m=o,!1}catch(e){return!1}}function i(e){try{var t=e.touches[0],n=Number(t.pageX),o=Number(t.pageY);f=n,m-(p=o)<100?x=!0:m-p>100&&(x=!0),w<g&&(_=!0,e.preventDefault()),w==g&&(U=$(".mod-comment").height(),z=U-2*h,j=!1,m-p>0&&k?(_=!1,alideshu=!1,$(".contant").height($(".mod-comment").height()),$(".mod-comment .banner").css({position:"fixed"}),$(".mod-comment .comment-slide").height($(".mod-comment .comment-slide .show").height()),p-m>5&&$(document).scrollTop()<=0&&(e.preventDefault(),_=!0,k=!1)):$(document).scrollTop()<=0&&(e.preventDefault(),p-m>y&&(k=!1,_=!0)),$(document).scrollTop()>z&&(j=!0,C&&e.preventDefault(),$(document).scrollTop()>=U-h&&m-p>0&&e.preventDefault()),l-f>=10?e.preventDefault():f-l>=10&&e.preventDefault(),l-f>y?(e.preventDefault(),$(".mod-comment .title a").removeClass("active").eq(0).addClass("active"),$(".mod-comment .com-wrap").removeClass("show").eq(0).addClass("show"),$(document).scrollTop(0),_=!0,C=!0,clearTimeout(D),$(".ui").fadeOut(),U=$(".mod-comment").height()):f-l>y&&(e.preventDefault(),$(".mod-comment .title a").removeClass("active").eq(1).addClass("active"),$(".mod-comment .com-wrap").removeClass("show").eq(1).addClass("show"),$(document).scrollTop(0),_=!0,C=!0,clearTimeout(D),$(".ui").fadeOut(),U=$(".mod-comment").height()))}catch(e){}}function c(e){if(x&&_)x=!1,j=!1,$(".mod-comment .banner").css({position:"absolute"}),$(".contant").height(h),$(document).scrollTop()<=0&&(_=!1,p-m>y?--w<0?(w=0,_=!0):$(".slide").animate({top:-h*w+"px"},500,function(){_=!0}):m-p>y?++w>=g?(w=g,$(".slide").animate({top:-h*w+"px"},500,function(){_=!0,k=!0})):$(".slide").animate({top:-h*w+"px"},500,function(){_=!0}):_=!0),0==w?(clearTimeout(P),$(".mod-index .banner img").css({animation:"motionturn 5s linear forwards"}),$(".mod-index .banner img").css({webkitAnimation:"motionturn 5s linear forwards"}),P=setTimeout(function(){$(".sponsor").on({click:d})},5e3)):($(".mod-index .banner img").css({animation:"2s"}),$(".mod-index .banner img").css({webkitAnimation:"2s"}),$(".sponsor").click(function(){$(this).attr({href:"javascript:;"})}));else if(j){j=!1;var t=$(".mod-comment .show").attr("role-url");"new com-wrap show"==$(".mod-comment .new").attr("class")?$.ajax({url:t,type:"get",dataType:"json",async:!0,data:E,success:function(e){if("200"==e.code)return $(".mod-comment .new").append(e.data.str),A++,E={page:A},A=parseInt(E.page),b++,void(j=!0);C=!1,$(document).scrollTop()>=U-h&&u(e.message),k=!0,j=!0},error:function(){console.log("请求数据失败")}}):$.ajax({url:t,type:"get",dataType:"json",async:!0,data:T,success:function(e){if("200"==e.code)return I++,T={page:I},I=parseInt(T.page),b++,$(".mod-comment .wonderful").append(e.data.str),void(j=!0);C=!1,$(document).scrollTop()>=U-h&&u(e.message),k=!0,j=!0},error:function(){console.log("请求数据失败")}})}}function s(e,t){var n=t.data("url");if("no"==L)return u("未登录"),!1;$.ajax({url:n||"/User/setPraise",type:"post",dataType:"json",data:e,success:function(e){if(200==e.code){var n=t.find("i");if(e.data.total>0)n.html(e.data.total);else{var o=parseInt(n.html());n.html(o+1)}}},error:function(){console.log("返回信息错误")}})}function u(e){$(".ui").show();var t=$(".ui");t.find("span").text(e);var n=t.width()/2;t.css("margin-left","-"+n+"px"),t.click(function(){t.fadeOut()}),D=setTimeout(function(){t.fadeOut()},1e3)}function d(){$(".sponsor").attr({href:$(".sponsor").attr("data-url")})}window.onpageshow=function(e){(e||window.event).persisted&&window.location.reload()},window.addEventListener("onorientationchange"in window?"orientationchange":"resize",o,!1),$(function(){$.cookie=function(e,t,n){if(void 0===t){var o=null;if(document.cookie&&""!=document.cookie)for(var r=document.cookie.split(";"),a=0;a<r.length;a++){var i=$.trim(r[a]);if(i.substring(0,e.length+1)==e+"="){o=decodeURIComponent(i.substring(e.length+1));break}}return o}n=n||{},null===t&&(t="",n.expires=-1);var c="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var s;"number"==typeof n.expires?(s=new Date).setTime(s.getTime()+24*n.expires*60*60*1e3):s=n.expires,c="; expires="+s.toUTCString()}var u=n.path?"; path="+n.path:"",d=n.domain?"; domain="+n.domain:"",l=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),c,u,d,l].join("")}}),e("modules/form").listen("/User/setqpscomment",{validError:function(e){var t=e.element;"content"==t.attr("name")&&("notempty"==e.valid?(u("请输入10-500个字符的内容"),t.attr({placeholder:"内容不能为空"})):"len"==e.valid&&(u("请输入10-500个字符的内容"),t.attr({placeholder:"字数必须在10到500字之间"})))},cleanup:function(e){},success:function(e){"200"==e.data.code?(u("评论成功"),$("textarea").val("")):u(e.data.message)},error:function(){}});var l,m,f,p,h=$(window).height(),v=$(window).width(),g=$(".contant .mod-wrap").length-1,y=h/5,w=0,x=!1,b=1,_=!0,k=!0,j=!1,C=!0,E=($(".new").height(),$(".wonderful").height(),$(".mod-comment .new").attr("data-page")),T=$(".mod-comment .wonderful").attr("data-page"),A=2,I=2,U=$(".comment-slide").height(),z=U-h,N=!0,D=null;E={page:A},T={page:I},$(".contant").height(h),$(".contant").width(v);parseInt($(".mod-comment .new li").eq(0).outerHeight()),parseInt($(".mod-comment .regain").height()),parseInt($(".mod-comment .main").css("margin-top")),parseInt($(".mod-comment .banner").outerHeight()),parseInt($(".mod-comment .title").outerHeight());$(".turn").height(h-parseInt($(".mod-index .main").css("margin-top"))-parseInt($(".mod-index .main").css("height"))/2),$(".contant .mod-wrap-height").height(h),$(".contant .mod-wrap").width(v),$(".mod-video .head .title").width()>$(".mod-video .head .max-width").outerWidth()?($(".mod-video .head .head-title").width($(".mod-video .head .title").width()+2*parseInt($(".mod-video .head .head-title").css("padding-left"))),$(".mod-video .head .head-title").css({margin:"0px auto"}),$(".mod-video .head .head-title").removeClass("max-width")):($(".mod-video .head .head-title").width($(".mod-video .head .title").outerWidth()+2*parseInt($(".mod-video .head .head-title").css("padding-left"))),$(".mod-video .head .head-title").css({margin:"0px auto"})),$(window).resize(function(){r()}),function(){try{document.addEventListener("touchstart",a,!1),document.addEventListener("touchmove",i,!1),document.addEventListener("touchend",c,!1)}catch(e){}}(),$(".reply-textarea").focus(function(){"no"==$(this).attr("islogin")&&(window.location.href="//m.p2peye.com/member.php?mod=logging&action=login&mobile=2&referer=//licai.p2peye.com/topic/qps/")}),$(".mod-comment .title a").on("click",function(){var e=$(this).index();clearTimeout(D),$(".ui").fadeOut(),$(".mod-comment .title a").removeClass("active"),$(this).addClass("active"),$(".mod-comment .com-wrap").removeClass("show").eq(e).addClass("show"),$(document).scrollTop(0),C=!0,U=$(".mod-comment").height()}),$(".share").on("click",function(e){e.stopPropagation(),$(".share-wrap").show(),k=!0}),$(document).on("touchstart",function(){$(".share-wrap").hide()}),$(".regain").on("touchend",function(){return w=0,$(".mod-comment .comment-slide").css({top:"0px"}),$(".mod-comment .banner").css({position:"absolute"}),$(".contant").height(h),clearTimeout(D),$(".ui").fadeOut(),$(".slide").animate({top:"0px"},500,function(){$(".mod-index .banner").css({animation:"motion2 5s linear forwards"}),x=!0,_=!0,N=!0}),!1});var L=$(".reply-textarea").attr("islogin");$("body").on("click","[role=praise]",function(){if("no"==(L=$(".reply-textarea").attr("islogin")))return u("未登录"),!1;var e=$(this);return s(function(){for(var t=e.attr("role-data").split("|"),n={},o=0;o<t.length;o++){var r=t[o].split(":");n[r[0]]=r[1]}return n}(),e),!1});var M=$(".video").attr("data-src").split("==")[0].split("/");$(".video .videoclose").on("click",function(){$(this).hide(),player=new YKU.Player("youkuplayer",{styleid:"0",autoplay:!0,client_id:"4018dcb0bbbdda7f",vid:M[M.length-1],events:{onPlayerReady:function(){window.removeEventListener("onorientationchange"in window?"orientationchange":"resize",o,!1)},onPlayEnd:function(){window.addEventListener("onorientationchange"in window?"orientationchange":"resize",o,!1)}}})});var q=$(document).height()-$(".mod-commentlist .banner").height()-$(".mod-commentlist .reply-submit").outerHeight()-$(".share").outerHeight()-40,O=$(".reply-textarea");O.height();$("body").on("input",".reply-textarea",function(){var e=$(this);S(e)}),O[0].attachEvent&&O[0].attachEvent("onpropertychange",function(e){"value"==e.propertyName&&$(O[0]).trigger("input")});var S=function(e){var t=e[0].scrollTop,n=t+(e[0].scrollHeight-parseInt(e.css("padding-top"))-parseInt(e.css("padding-bottom")));n>q||t>0&&e.css({height:n})},P=null;P=setTimeout(function(){$(".sponsor").on({click:d})},5e3)});