!function(){function e(e,t,o){if(""!==e){if(n[e]&&!o)throw"Module "+e+" already exist!";n[e]="function"==typeof t?{id:e,fn:t,exports:{}}:{exports:t}}}function t(e){var o,i,a=n[e];if(a)return(o=a.fn)&&((i="function"==typeof o?o(t,a.exports,a):o)&&(a.exports=i),delete a.fn),a.exports;throw"Module "+e+" not exist!"}var n={},o=document.getElementsByTagName("script"),i=o[o.length-1];if(window.mt={},mt.module=function(){return arguments.length>=2?e.apply(e,arguments):t.apply(t,arguments)},i){var a=i.getAttribute("init"),r=function(){};if(a&&""!=a&&(a=a.split(",")).length){var s=function(){for(var e=0;e<a.length;e++)mt.module(a[e])};i.onload=s,i.onreadystatechange=function(){var e=this.readyState;"loaded"!==e&&"complete"!==e||(i.onreadystatechange=r,s())}}}}(),mt.module("modules/validate",function(e,t,n){t.api={useremail:function(e){var t={};return t.ret=!0,t.message="",$.ajax({url:"/ajax/tyCheckemail",type:"post",async:!1,data:"email="+e,success:function(e){200!=e.code&&(t.ret=!1),t.message=e.message},error:function(){t.ret=!1}}),t},username:function(e){var t={};return t.ret=!0,t.message="",$.ajax({url:"/ajax/tyCheckusername",type:"post",async:!1,data:"username="+e,success:function(e){200!=e.code&&(t.ret=!1),t.message=e.message},error:function(){t.ret=!1}}),t},hasmobile:function(e){var t={};return t.ret=!0,t.message="",$.ajax({url:"/ajax/tyCheckmobile",type:"post",async:!1,data:"mobile="+e,success:function(e){200!=e.code&&(t.ret=!1),t.message=e.message},error:function(){t.ret=!1}}),t},captcha:function(e){var t=!0;return $.ajax({url:"/ajax/checkVcode",type:"post",async:!1,data:"type=register&code="+e,success:function(e){200!=e.code&&(t=!1)},error:function(){t=!1}}),t},httpregname:function(e){var t=!0;return $.ajax({url:"/activity/verifyUname?uname="+e,async:!1,success:function(e){1!=e&&(t=!1)},error:function(){t=!1}}),t},regname:function(e){var t=!0;return $.ajax({url:"/user/verifyUname?uname="+e,async:!1,success:function(e){1!=e&&(t=!1)},error:function(){t=!1}}),t},regInvests:function(e){var t=!0;return $.ajax({url:"/fund/verifyCompanyRecord",type:"post",data:"company="+e,async:!1,success:function(e){1!=e&&(t=!1)},error:function(){t=!1}}),t},regtimeoutInvests:function(e){var t=!0;return $.ajax({url:"/fund/verifyCompanyRun",type:"post",data:"company="+e,async:!1,success:function(e){1!=e&&(t=!1)},error:function(){t=!1}}),t},regemail:function(e){var t=!0;return $.ajax({url:"/user/verifyUemail?uemail="+e,async:!1,success:function(e){1!=e&&(t=!1)},error:function(){t=!1}}),t},companyName:function(e){var t={};return t.ret=!0,t.message="",e=e.trim(),e=encodeURI(e),$.ajax({url:"/member/getCompany?company_name="+e,async:!1,success:function(e){200==e.code?t.message=e.data.id:t.ret=!1},error:function(){t.ret=!1}}),t},equal:function(e,t){return e===$(t).val()},notempty:function(e){return""!==$.trim(e)},len:function(e,t,n){return!(e.length<t||e.length>n)},cha:function(e,t){return!!new RegExp(t).test(e)},number:function(e){return!!/^\d+$/.test(e)},user_name:function(e){},times:function(e,t){return e%t==0},cn_or_en:function(e){return!!/^([\u4E00-\u9FA5]|[a-zA-Z])+$/.test(e)},firstplace_cn_or_num:function(e){return!!/^[\u4e00-\u9fa5|a-z|A-z]/i.test(e)},floatNumber:function(e){return!!/^\d+((\.{1}\d+)|\d?)$/.test(e)},numberFixed2:function(e){return!!/^(([1-9]+)|([0-9]+\.[0-9]{1,2}))$/.test(e)},cn:function(e){return!!/^[\u4e00-\u9fa5]+$/.test(e)},filter:function(e){return!!/^[0-9a-zA-Z_]{1,}$/.test(e)},pwd:function(e){return!!/((?=.*\d)(?=.*\D)|(?=.*[a-zA-Z])(?=.*[^a-zA-Z]))^.{1,}$/.test(e)},reg_cn_letter_number:function(e){return!!/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/.test(e)},reg_cn_len:function(e,t,n){var o=e.replace(/[^\x00-\xFF]/g,"***").length;return!(o<t||o>n)},reg_cn_len2:function(e,t,n){var o=e.replace(/[^\x00-\xFF]/g,"**").length;return!(o<t||o>n)},email:function(e){return!!/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(e)},mobile:function(e){return!!e&&(e=e.replace(/\s+/g,""),!!/^(13\d|18\d|15\d|17\d|14\d|19\d|16\d)\d{8}$/.test(e))},notmobile:function(e){return!/1\d{10}/.test(e)},ID_card:function(e){return e=$.trim(e),!!/(^\d{15}$)|(^\d{16}$)|(^\d{18}$)|(^\d{19}$)|(^\d{17}(\d|X|x)$)/.test(e)},numberRegion:function(e,t,n){return!!/\d+/.test(e)&&(e-=0,t-=0,n-=0,!(e>n||e<t))},numberMaxOpen:function(e,t){return!!/\d+/.test(e)&&(e-=0,t-=0,e<t)},numberMaxClosed:function(e,t){return!!/\d+/.test(e)&&(e-=0,t-=0,e<=t)},numberMinOpen:function(e,t){return!!/\d+/.test(e)&&(e-=0,t-=0,e>t)},numberMinClosed:function(e,t){return!!/\d+/.test(e)&&(e-=0,t-=0,e>=t)},vcode:function(e,t){var n=!0;return $.ajax({url:"/vcode/check?type="+t+"&vcode="+e,async:!1,success:function(e){0!=e&&(n=!1)},error:function(){n=!1}}),n},checkRegMobileCode:function(e,t){var n=!0;return $.ajax({url:"/Usermobile/checkPhoneCode",data:{mobile:t,mobilecode:e},async:!1,success:function(e){(e*=1)>0&&(n=!1)},error:function(){n=!1}}),n},tyregistervcode:function(e){var t=!0;return $.ajax({url:"/ajax/checkVcode",type:"post",async:!1,data:"type=register&code="+e,success:function(e){200!=e.code&&(t=!1)},error:function(){t=!1}}),t}},t.valid=function(e){var n=$(e),o={};if(n[0]&&"FORM"===n[0].tagName.toUpperCase()){for(var i=n.find("[data-valid]"),a=0,r=i.length,s=!0;a<r;a++)if((s=t.valid(i.eq(a)))&&s.error){o=s;break}return o}for(var c,u,l,d=n.attr("data-valid").split("|"),a=0,r=d.length;a<r;a++)if(l=d[a].split(":"),c=l[0],(u=l.slice(1)).unshift(n.val()),t.api[c]&&$.isFunction(t.api[c]))if("object"==typeof(s=t.api[c].apply(n,u))){if(0==s.ret){o={error:1,element:n,valid:c,message:s.message};break}1==s.ret&&(o={error:0,element:n,valid:c,message:s.message})}else{if(0==s){o={error:1,element:n,valid:c};break}o={error:0,element:n,valid:c}}return o}}),mt.module("modules/Event",function(e,t,n){function o(e){this.NAMESPACE=e}var i={},a=Array.prototype.slice,r=o.prototype;r.listen=r.addEventListener=function(e,t){if(t){var n=this.NAMESPACE,o=i[n].evs;return o[e]?o[e].push(t):o[e]=[t],this}},r.fire=function(e){var t,n,o=a.call(arguments,1),r=this.NAMESPACE,s=i[r].evs[e],c=0,u=0,l=i[r].once[e];if(s&&s.length)for(t=s.length;c<t;c++)s[c].apply(s[c],o);if(l&&l.length){for(n=l.length;u<n;u++)l[u].apply(l[u],o);try{delete i[r].once[e]}catch(t){i[r].once[e]=null}}return this},r.once=function(e,t){if(t){var n=this.NAMESPACE,o=i[n].once;return o[e]?o[e].push(t):o[e]=[t],this}},r.remove=function(e,t){var n=i[e];if(n){var o,a=n.evs,r=0,s=t.toString();if(a&&a.length)for(o=a.length;r<o;r++)s==a[r].toString()&&a.splice(r,1)}},n.exports=function(e){var t=i[e];return t||(t=i[e]={cons:new o(e),evs:{},once:{}}),t.cons}}),mt.module("modules/form",function(e,t,n){function o(e,t){if(e.parentsUntil){var n=e.parentsUntil(t),o=n.length;return o?n.eq(o-1).parent():e}for(var i=e.parent().get(0),t=t.toUpperCase();i&&i.tagName&&i.tagName.toUpperCase()!==t;)i=i.parentNode;return $(i)}var i=e("modules/validate"),a=e("modules/Event")("formModule");$("body").on("submit","[role=ajaxfrom],[role=validform]",function(e){var t=$(this),n=t.attr("method")||"GET",o=t.attr("action"),r=i.valid(t);if(r&&!r.error){if("ajaxfrom"!=t.attr("role"))return!0;if("1"==t.attr("role-clock"))return!1;t.attr("role-clock",1),a.fire(o+"_ajax_before",t),$.ajax({url:o,type:n,data:t.serializeArray(),success:function(e,n,i){a.fire(o+"_success",{data:e,text:n,xhr:i},t),t.attr("role-clock",0)},error:function(e,n,i){a.fire(o+"_error",{xhr:e,text:n,error:i},t),t.attr("role-clock",0)}})}else a.fire(o+"_valid_failure",r,t);e.preventDefault()}).on("focus","[data-valid]",function(e){var t,n=$(this),i=o(n,"form");i.attr("valid-after")||(t=i.attr("action"),i.length&&a.fire(t+"_valid_cleanup",n))}).on("blur","[data-valid]",function(e){var t=this;setTimeout(function(){var e,n,r=$(t),s=o(r,"form");s.attr("valid-after")||(n=i.valid(r),e=s.attr("action"),s.length&&(n.error&&a.fire(e+"_valid_failure",n,s),n.error||a.fire(e+"_valid_success",r,s,n)))},200)}).on("keyup","[data-valid]",function(e){var t,n=$(this),i=o(n,"form");i.length&&(t=i.attr("action"),a.fire(t+"_valid_cleanup",n))}).on("change","[data-valid]",function(e){var t,n=$(this),i=o(n,"form");i.attr("valid-after")||i.length&&(t=i.attr("action"),a.fire(t+"_valid_cleanup",n))}).on("click",".reflashVcode",function(e){e.preventDefault();var t=$(this).parent().find("img.vcodeimg"),n=t.attr("src");n&&""!=n&&t.attr("src",n+"1")}),t.listen=function(e,t){t.success&&a.addEventListener(e+"_success",function(e,n){t.success.apply(n,[e])}),t.error&&a.addEventListener(e+"_error",function(e,n){t.error.apply(n,[e])}),t.validError&&a.addEventListener(e+"_valid_failure",function(e){t.validError(e)}),t.validSuccess&&a.addEventListener(e+"_valid_success",function(e,n,o){t.validSuccess(e,n,o)}),t.cleanup&&a.addEventListener(e+"_valid_cleanup",function(e){t.cleanup(e)}),t.ajaxBefore&&a.addEventListener(e+"_ajax_before",function(e){t.ajaxBefore(e)})},t.ajax=function(e){var t={type:"get",async:!1,url:"",callback:"",dataType:"json",error:!1},n=(new Date).getTime();for(var o in e)t[o]=e[o];$.ajax({type:t.type,async:t.async,url:t.url+("get"!=t.type?"":"&v="+n),dataType:t.dataType,data:t.data,success:function(e){t.callback(e)},error:t.error})}}),mt.module("modules/uid",function(e,t,n){t.create=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+e()+e()}}),mt.module("modules/Class",function(e,t,n){function o(){this.id=r.create(),this.__event__=a("class.event."+this.id)}function i(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}var a=e("modules/Event"),r=e("modules/uid"),s=a("class");o.prototype.fire=function(){this.__event__.fire.apply(this.__event__,arguments)},o.prototype.addEventListener=function(){this.__event__.addEventListener.apply(this.__event__,arguments)},o.prototype.dispatchGlobalMessage=function(){s.fire.apply(s,arguments)},o.prototype.listenGlobalMessage=function(){s.addEventListener.apply(s,arguments)},t.create=function(e,t){var n,a,r=function(){};return"object"==typeof e&&(t=e,e=r),t&&t.superClass?(r.prototype=t.superClass,delete t.superClass):r.prototype=o.prototype,a=function(){o.call(this),e.apply(this,arguments)},n=a.prototype=new r,n.constructor=e.constructor,a.extend=function(e){i.call(a,n,e)},t&&i.call(a,n,t),a}}),mt.module("modules/Dialog",function(e,t,n){var o=e("modules/Class").create(function(e){e=e||{};var t={fixed:!0,width:400,height:250,title:"标题",content:"内容"},n="dialog_"+this.id;e=$.extend(t,e),this.options=e,this.target=$(o.template),this.target.attr("id",n),this.position=null,e.extendClass&&this.target.addClass(e.extendClass),e.width&&this.target.css("width",e.width+"px"),e.height&&this.target.css("height",e.height+"px"),this.target.css("position","fixed"),this.titleTarget=this.target.find("div.dialog_title div:first"),this.contentTarget=this.target.find("div.dialog_content"),this.footerTarget=this.target.find("div.dialog_footer"),this.contentTarget.html(e.content),this.titleTarget.html(e.title),e.hiddenTitlte&&this.titleTarget.hide(),e.footer||this.footerTarget.hide(),o.instances[this.id]=this},{open:function(){var e=this;$("#dialog_"+this.id).length||($("body").append(this.target),this.target.on("click",".dialog_close",function(t){e.close(t.target)}).hide(),e.addEventListener("close_dialog",function(t){e.close(t)})),this.target.fadeIn(),this._customPos||this.center();var t=Math.max($("body").outerWidth(),$(window).width()),n=Math.max($("body").outerHeight(),$(window).height());if(this.showLightbox){if($("#lightbox_wrap").length)var o=$("#lightbox_wrap");else(o=$('<div id="lightbox_wrap"></div>')).css({width:t,height:n}).appendTo($("body"));o.show()}else o.hide()},close:function(e){this.target.hide(),this.showLightbox&&$("#lightbox_wrap").hide(),this.fire("close",this,e)},setTitle:function(e){this.options.title=e,this.titleTarget.html(e)},setContent:function(e){this.options.content=e,this.contentTarget.html(e)},setPos:function(e){this._customPos=!0,this.target.css(e)},setSkin:function(e){this.target.addClass(e)},setPos:function(e){this.position=e},showTitle:function(){this.titleTarget.show()},showFooter:function(){this.footerTarget.show()},center:function(){var e=this,t=this.target.outerWidth(),n=this.target.outerHeight(),o=$(window),i=(o.width(),o.height());scrollTop=o.scrollTop(),this.target.css({left:"50%",top:"absolute"==e.position?200+$(window).scrollTop()+"px":n>i?0:"50%",marginLeft:-t/2,marginTop:"absolute"==e.position?0:n>i?0:-n/2,position:e.position?e.position:"fixed"})},setBox:function(e,t){this.options.width=e,this.options.height=t,this.target.css({width:e,height:t}),this._customPos||this.center()},setWidth:function(e){this.options.width=e,this.target.css("width",e+"px"),this._customPos||this.center()},setHeight:function(e){this.options.height=e,this.target.css("height",e+"px"),this._customPos||this.center()}});o.template=['<div class="dialog">','<div class="dialog_title"><div></div><a class="dialog_close closebtn" href="javascript:void(0)"></a></div>','<div class="dialog_content"></div>','<div class="dialog_footer"></div>',"</div>"].join(""),o.instances={},n.exports=o}),mt.module("modules/dialogUi",function(e,t,n){var o=e("modules/Dialog"),i=e("modules/uid"),a={};t.listen=function(e,t,n){a[e]||(a[e]={}),n||(n=i.create()),a[e][n]=t},t.remove=function(e,t){a[e]&&delete a[e][t]},t.fire=function(e,t){if(t=t||[],e&&a[e])for(var n in a[e])try{a[e]._dialog||(a[e]._dialog=new o),a[e]._dialog.event_source=document.body,a[e][n].apply(a[e]._dialog,t)}catch(e){}},$("body").on("click","[role=dialog]",function(e){e.stopPropagation();var t=$(this),n=t.attr("role-api");if(n&&""!=n&&(params=n.split("|"),"undefined"!=typeof params&&(n=params[0],params=params[1]?params[1].split(","):[],a[n])))for(var i in a[n])try{a[n]._dialog||(a[n]._dialog=new o),a[n]._dialog.event_source=t,a[n][i].apply(a[n]._dialog,params)}catch(e){}})}),mt.module("modules/template",function(e,t,n){var o={},i={},a={},r="".trim;t.openTag="<%",t.closeTag="%>",t.render=function(e,t,n){var o=c(e,n);return void 0===o?u({id:e,name:"Render Error",message:"Not get template"}):o(t)},t.compile=function(e,n){function a(o){try{return c.call(i,o)}catch(i){return r?(i.id=e||n,i.name="Render Error",i.source=n,u(i)):t.compile(e,n,!0)(o)}}var r=arguments[2];"string"!=typeof n&&(r=n,n=e,e=null);try{var c=s(n,r)}catch(t){return t.id=e||n,t.name="Syntax Error",u(t)}return a.toString=function(){return c.toString()},e&&(o[e]=a),a},t.helper=function(e,t){if(void 0===t)return i[e];i[e]=t},t.plugin=function(e,t){if(void 0===t)return a[e];a[e]=t};var s=function(e,n){function o(e){return g+=e.split(/\n/).length-1,e=e.replace(/('|"|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n"),(e=w[1]+"'"+e+"'"+w[2])+"\n"}function a(e){var t=g;if(p?e=p(e):n&&(e=e.replace(/\n/g,function(){return"$line="+ ++g+";"})),0===e.indexOf("=")){var o,i,a,c=e.substring(1).replace(/[\s;]*$/,""),u=c.split("|"),l=1,d=u.length;if(d){for(c=u[0];l<d;l++)i=u[l].split(":"),fn=i[0],(o=i.slice(1)).unshift(c),o.unshift('"'+fn+'"'),c="$plugins("+o.join(",")+")";a=c}else a=c;e=w[1]+(r?"$getValue(":"")+a+(r?")":"")+w[2]}return n&&(e="$line="+t+";"+e),s(e),e+"\n"}function s(e){e=e.replace(/\/\*.*?\*\/|'[^']*'|"[^"]*"|\.[\$\w]+/g,""),l.call(e.split(/[^\$\w\d]+/),function(e){if(/^(this|\$helpers)$/.test(e))throw{message:'Prohibit the use of the "'+e+'"'};!e||d[e]||/^\d/.test(e)||v[e]||(c(e),v[e]=!0)})}function c(e){var t;t="include"===e?y:i[e]?"$helpers."+e:"$data."+e,$+=e+"="+t+","}var u=t.openTag,h=t.closeTag,p=t.parser,f=e,m="",g=1,v={$out:!0,$line:!0},$="var $helpers=this,"+(n?"$line=0,":""),w=r?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],y="function(id,data){if(data===undefined){data=$data}return $helpers.$render(id,data)}";l.call(f.split(u),function(e,t){var n=(e=e.split(h))[0],i=e[1];1===e.length?m+=o(n):(m+=a(n),i&&(m+=o(i)))}),f=m,n&&(f="try{"+f+"}catch(e){e.line=$line;throw e}"),f=$+w[0]+f+"return "+w[3];try{return new Function("$data",f)}catch(e){throw e.temp="function anonymous($data) {"+f+"}",e}},c=function(e,n){var i=o[e];if(void 0===i){var a=document.getElementById(e);return a&&t.compile(e,a.value||a.innerHTML,n),o[e]}return i},u=function(e){function t(){return t+""}var n="[template]:\n"+e.id+"\n\n[name]:\n"+e.name;return e.message&&(n+="\n\n[message]:\n"+e.message),e.line&&(n+="\n\n[line]:\n"+e.line,n+="\n\n[source]:\n"+e.source.split(/\n/)[e.line-1].replace(/^[\s\t]+/,"")),e.temp&&(n+="\n\n[temp]:\n"+e.temp),window.console&&console.error(n),t.toString=function(){return"{Template Error}"},t},l=Array.prototype.forEach||function(e,t){for(var n=this.length>>>0,o=0;o<n;o++)o in this&&e.call(t,this[o],o,this)},d={};l.call("break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,parseFloat,parseInt".split(","),function(e){d[e]=!0}),t.helper("$forEach",l),t.helper("$render",t.render),t.helper("$getValue",function(e){return void 0===e?"":e}),t.helper("$plugins",function(){var e=Array.prototype.slice.call(arguments,0),t=e[0];if(a[t])return a[t].apply(this,e.slice(1))}),t.plugin("truncate",function(e,t,n){return n=n||"...",e.length>t?e.substring(0,t)+n:e});var h={'"':"quot","<":"lt",">":"gt","&":"amp"," ":"nbsp"};t.plugin("encode",function(e,t){return"html"===t?String(e).replace(/["<>& ]/g,function(e){return"&"+h[e]+";"}):"url"===t?encodeURIComponent(String(e)):e}),t.plugin("decode",function(e,t){return"html"===t?String(e).replace(/["<>& ]/g,function(e){return"&"+h[e]+";"}):"url"===t?decodeURIComponent(String(e)):e}),t.plugin("replace",function(e,t,n){return e.replace(t,n)}),t.plugin("parseDate",function(e,t){var n=new Date(1e3*e);return n.getFullYear()+t+(n.getMonth()+1)+t+n.getDate()}),t.plugin("default",function(e,t){return""===e?t:e})}),mt.module("modules/jssdk",function(e,t,n){wxReady=function(e){window.location.href.indexOf("debug");$.ajax({url:"//www.p2peye.com/wechat.php",type:"get",data:{mod:"share",url:encodeURIComponent(location.href.split("#")[0])},dataType:"jsonp",jsonp:"callback",jsonpCallback:"success_jsonpCallback",success:function(t){if(200!=t.code)return e("error");wx.config({debug:!1,appId:"wx4c26a6e0f7d85519",timestamp:t.data.timestamp,nonceStr:t.data.wxnonceStr,signature:t.data.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","translateVoice","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"]}),e("success")},error:function(){e("error")}})},t.init=wxReady,t.share=function(e){var t={title:$("title").html(),link:window.location.href.split("#")[0],imgUrl:"//www.p2peye.com/static/image/wechatshare.jpg",desc:$("meta[name=description]").attr("content")||"",type:"link",dataUrl:"",success:function(){},cancel:function(){}};for(var n in e)t[n]=e[n];wx.ready(function(){wx.checkJsApi({jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","translateVoice","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"],success:function(e){}}),wx.onMenuShareTimeline(t),wx.onMenuShareAppMessage(t),wx.onMenuShareQQ(t),wx.onMenuShareWeibo(t),wx.onMenuShareQZone(t)})}}),mt.module("mobile/topic_qps",function(e,t,n){function o(){c(),l(),$(".share-wrap").show()}function i(){var e=$("#hid").val();$.ajax({type:"get",url:"/topic/isComment",data:"hid="+e,dataType:"json",success:function(e){if(200==e.code){var t=e.data;b=t.is_mobile,a()}else s(e.message)}})}function a(){s(y.render("giftTpl"))}function r(){function e(){a=setTimeout(function(){t(),e()},50)}function t(){var e=o.eq(u);u==o.length-1&&(u=-1),e.addClass("active"),setTimeout(function(){e.removeClass("active")},50),u++}function n(){$.ajax({type:"post",url:"/User/award",data:l,dataType:"json",success:function(e){if(5151==e.code){(t=e.data).tip="很遗憾未中奖",t.is_mobile=!0,t.code=e.code;n=y.render("winTpl",t);c(),s(n)}else if(200==e.code){var t=e.data;t.tip="恭喜您抽中",t.is_mobile=b,t.code=e.code;var n=y.render("winTpl",t);c(),s(n)}else s(n='<p class="tip">'+e.message+"</p>")}})}var o=$(".giftlist").find("li"),i=o.length,a=null,r=null,u=0,l={hid:$(".lucky").attr("award_hid"),type:$(".lucky").attr("award_type")};o.eq(1).removeClass("active"),u=Math.round(Math.random()*i),e(),r=setTimeout(function(){n(),clearInterval(a),clearInterval(r)},5e3)}function s(e){var t=$("#dialog");t.find(".content").html(e);var n=t.outerHeight(),o=t.outerWidth(),i=$(window).height(),a=0;n<i&&(a=(i-n)/2),$(document).scrollTop()&&(a=$(document).scrollTop()+a),t.css({position:"absolute",left:"50%",top:a,zIndex:"1000",marginLeft:-o/2}),u(),t.show()}function c(){var e=$("#dialog"),t=e.find(".content");e.hide(),t.html(" ")}function u(){var e=$("#lightbox_wrap"),t=($("body").outerWidth(),$(window).height()),n=$("body").outerHeight(),o=Math.max(t,n);$("#lightbox_wrap").length?e.show().attr({open:"yes"}):(e=$('<div id="lightbox_wrap"></div>')).css({width:$("body").outerWidth(),height:o}).appendTo($("body")).show().attr({open:"yes"})}function l(){$("#lightbox_wrap").hide().attr({open:"no"})}function d(){var e=navigator.userAgent,t=(navigator.appVersion,e.indexOf("Android")>-1||e.indexOf("Linux")>-1);e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(t){if(height=$(window).height(),$(".contant .mod-wrap-height").height(height),I=$(window).width(),$(".turn").height(height-parseInt($(".mod-index .main").css("margin-top"))-parseInt($(".mod-index .main").css("height"))/2),$(".slide").css({top:-height*L+"px"}),$(".contant").width(I),$(".contant .mod-wrap").width(I),!(L<S))return!1;$(".contant").height(height),height<k?$(".contant .video-wrap").css({top:height-k+"px"}):$(".contant .video-wrap").css({top:"0px"})}}function h(e){try{var t=e.touches[0],n=Number(t.pageX),o=Number(t.pageY);return C=n,j=o,!1}catch(e){return!1}}function p(e){try{var t=e.touches[0],n=Number(t.pageX),o=Number(t.pageY);if(M=n,E=o,j-E<100?P=!0:j-E>100&&(P=!0),L<S&&(N=!0,e.preventDefault()),L==S){if($(".regain").show(),Z=$(".mod-comment").height(),F=Z-2*height,U=!1,j-E>0&&R){N=!1,alideshu=!1;var i=0;i=$(".mod-comment").height()<height?height:$(".mod-comment").height(),$(".contant").height(i),T.css({position:"fixed"}),$(".mod-comment .comment-slide").height($(".mod-comment .comment-slide .show").height()),E-j>5&&$(document).scrollTop()<=0&&(e.preventDefault(),N=!0,R=!1)}else $(document).scrollTop()<=0&&(e.preventDefault(),E-j>A&&(R=!1,N=!0));$(document).scrollTop()>F&&(U=!0,D&&e.preventDefault(),$(document).scrollTop()>=Z-height&&j-E>0&&e.preventDefault()),C-M>=10?e.preventDefault():M-C>=10&&e.preventDefault(),C-M>A?(e.preventDefault(),$(".mod-comment .title a").removeClass("active").eq(0).addClass("active"),$(".mod-comment .com-wrap").removeClass("show").eq(0).addClass("show"),$(document).scrollTop(0),N=!0,D=!0,clearTimeout(Q),$(".ui").fadeOut(),Z=$(".mod-comment").height()):M-C>A&&(e.preventDefault(),$(".mod-comment .title a").removeClass("active").eq(1).addClass("active"),$(".mod-comment .com-wrap").removeClass("show").eq(1).addClass("show"),$(document).scrollTop(0),N=!0,D=!0,clearTimeout(Q),$(".ui").fadeOut(),Z=$(".mod-comment").height())}}catch(e){}}function f(e){if(P&&N)P=!1,U=!1,T.css({position:"absolute"}),$(".contant").height(height),N=!1,E-j>A?(L--,$(".regain").hide(),L<0?(L=0,N=!0):$(".slide").animate({top:-height*L+"px"},500,function(){N=!0})):j-E>A?++L>=S?(L=S,$(".slide").animate({top:-height*L+"px"},500,function(){N=!0,R=!0,$(".regain").show()})):$(".slide").animate({top:-height*L+"px"},500,function(){N=!0}):N=!0,0==L?(_.css({animation:"motionturn 5s linear forwards"}),_.css({webkitAnimation:"motionturn 5s linear forwards"})):(_.css({animation:"2s"}),_.css({webkitAnimation:"2s"}));else if(U){U=!1;var t=$(".mod-comment .show").attr("role-url");"new com-wrap show"==$(".mod-comment .new").attr("class")?$.ajax({url:t,type:"get",dataType:"json",async:!0,data:O,success:function(e){if("200"==e.code)return $(".mod-comment .new").append(e.data.str),m(),q++,O={page:q},q=parseInt(O.page),V++,void(U=!0);D=!1,$(document).scrollTop()>=Z-height&&v(e.message),R=!0,U=!0},error:function(){}}):$.ajax({url:t,type:"get",dataType:"json",async:!0,data:z,success:function(e){if("200"==e.code)return W++,z={page:W},W=parseInt(z.page),V++,$(".mod-comment .wonderful").append(e.data.str),U=!0,void m();D=!1,$(document).scrollTop()>=Z-height&&v(e.message),R=!0,U=!0},error:function(){}})}}function m(){$(".mod-comment .praise").click(function(){var e=$(this);return g(function(){for(var t=e.attr("role-data").split("|"),n={},o=0;o<t.length;o++){var i=t[o].split(":");n[i[0]]=i[1]}return n}(),e),!1})}function g(e,t){var n=t.data("url");$.ajax({url:n||"/User/setPraise",type:"post",dataType:"json",data:e,success:function(e){if(200==e.code){var n=t.find("i");if(e.data.total>0)n.html(e.data.total);else{var o=parseInt(n.html());n.html(o+1)}}},error:function(){}})}function v(e){$(".ui").show();var t=$(".ui");t.find("span").text(e);var n=t.width()/2;t.css("margin-left","-"+n+"px"),t.click(function(){t.fadeOut()}),Q=setTimeout(function(){t.fadeOut()},1e3)}var w=e("modules/form"),y=(e("modules/dialogUi"),e("modules/template")),x=e("modules/jssdk"),b=null,_=$(".mod-index .banner"),T=$(".mod-comment .banner");$(".sponsor")&&$(".sponsor").width($(".sponsor img").width()),x.init(function(e){"error"!=e&&x.share({success:function(){alert("分享成功")}})}),w.listen("/topic/setmobile",{validError:function(e){var t=e.element;"mobile"==t.attr("name")&&("notempty"==e.valid?t.attr({placeholder:"内容不能为空"}):"number"==e.valid&&t.attr({placeholder:"手机号必须是数字"}))},cleanup:function(e){},success:function(e){200==(e=e.data).code&&(v("评论成功"),o())},error:function(){}}),$(function(){$("body").on("touchend","#subShare",function(){o()})}),w.listen("/User/setqpscomment",{validError:function(e){var t=e.element;"content"==t.attr("name")&&("notempty"==e.valid?(v("请输入10-500个字符的内容"),t.attr({placeholder:"内容不能为空"})):"len"==e.valid&&(v("请输入10-500个字符的内容"),t.attr({placeholder:"字数必须在10到500字之间"})))},cleanup:function(e){},success:function(e){"200"==e.data.code?(v("评论成功"),$("textarea").val(""),i()):v(e.data.message)},error:function(){}}),$(function(){$("body").on("touchend",".lucky a",function(){if($(this).attr("clock"))return!1;r(),$(this).attr({clock:"yes"})})}),$(function(){$("body").on("touchend",".closed",function(){c(),l()})});var C,j,M,E,k=height=$(window).height(),I=$(window).width(),S=$(".contant .mod-wrap").length-1,A=height/5,L=0,P=!1,V=1,N=!0,R=!0,U=!1,D=!0,O=($(".new").height(),$(".wonderful").height(),$(".mod-comment .new").attr("data-page")),z=$(".mod-comment .wonderful").attr("data-page"),q=2,W=2,Z=$(".comment-slide").height(),F=Z-height,H=!0,Q=null;O={page:q},z={page:W},$(".contant").height(height);parseInt($(".mod-comment .new li").eq(0).outerHeight()),height,parseInt($(".mod-comment .regain").height()),parseInt($(".mod-comment .main").css("margin-top")),parseInt(T.outerHeight()),parseInt($(".mod-comment .title").outerHeight());$(".turn").height(height-parseInt($(".mod-index .main").css("margin-top"))-parseInt($(".mod-index .main").css("height"))/2),$(".contant .mod-wrap-height").height(height);var B=$(".mod-video .head .head-title");$(".mod-video .head .title").width()>$(".mod-video .head .max-width").outerWidth()?(B.width($(".mod-video .head .title").width()+2*parseInt(B.css("padding-left"))),B.css({margin:"0px auto"}),B.removeClass("max-width")):(B.width($(".mod-video .head .title").outerWidth()+2*parseInt(B.css("padding-left"))),B.css({margin:"0px auto"})),$(window).resize(function(){d()}),window.onpageshow=function(e){(e||window.event).persisted&&window.location.reload()},function(){try{document.addEventListener("touchstart",h,!1),document.addEventListener("touchmove",p,!1),document.addEventListener("touchend",f,!1)}catch(e){}}(),$(".reply-textarea").focus(function(){"no"==$(this).attr("islogin")&&(window.location.href="//m.p2peye.com/member.php?mod=logging&action=login&mobile=2&referer=//licai.p2peye.com/topic/qps/")}),$(".mod-comment .title a").on("click",function(){var e=$(this).index();clearTimeout(Q),$(".ui").fadeOut(),$(".mod-comment .title a").removeClass("active"),$(this).addClass("active"),$(".mod-comment .com-wrap").removeClass("show").eq(e).addClass("show"),$(document).scrollTop(0),D=!0,Z=$(".mod-comment").height()}),$(".share").on("click",function(e){e.stopPropagation(),$(".share-wrap").show(),R=!0}),$(document).on("touchstart",function(){$(".share-wrap").hide()}),$(".regain").on("touchend",function(){return L=0,$(".mod-comment .comment-slide").css({top:"0px"}),T.css({position:"absolute"}),$(".contant").height(height),clearTimeout(Q),$(".ui").fadeOut(),$(".slide").animate({top:"0px"},500,function(){_.css({animation:"motionturn 5s linear forwards"}),P=!0,N=!0,H=!0}),!1});$(".reply-textarea").attr("islogin");m();var X=$(".video").attr("data-src").split("==")[0].split("/");$(".video .videoclose").on("click",function(){$(this).hide(),$(this).parents(".video").find(".bg").hide(),player=new YKU.Player("youkuplayer",{styleid:"0",autoplay:!0,client_id:"4018dcb0bbbdda7f",vid:X[X.length-1],events:{onPlayerReady:function(){window.removeEventListener("onorientationchange"in window?"orientationchange":"resize",hengshuping,!1)},onPlayEnd:function(){window.addEventListener("onorientationchange"in window?"orientationchange":"resize",hengshuping,!1)}}})});$(document).height(),$(".mod-commentlist .banner").height(),$(".mod-commentlist .reply-submit").outerHeight(),$(".share").outerHeight();var Y=$(".reply-textarea");Y.height();$("body").on("input",".reply-textarea",function(){$(this)}),Y[0].attachEvent&&Y[0].attachEvent("onpropertychange",function(e){"value"==e.propertyName&&$(Y[0]).trigger("input")})});